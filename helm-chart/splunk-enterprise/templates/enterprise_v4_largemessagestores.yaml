{{- if .Values.largemessagestore }}
{{- if .Values.largemessagestore.enabled }}
apiVersion: enterprise.splunk.com/v4
kind: LargeMessageStore
metadata:
  name: {{ .Values.largemessagestore.name }}
  namespace: {{ default .Release.Namespace .Values.largemessagestore.namespaceOverride }}
  {{- with .Values.largemessagestore.additionalLabels }}
  labels:
{{ toYaml . | nindent 4 }}
  {{- end }}
  {{- with .Values.largemessagestore.additionalAnnotations }}
  annotations:
{{ toYaml . | nindent 4 }}
  {{- end }}
spec:
  provider: {{ .Values.largemessagestore.provider | quote }}
  {{- with .Values.largemessagestore.s3 }}
  s3:
    {{- if .endpoint }}
    endpoint: {{ .endpoint | quote }}
    {{- end }}
    {{- if .path }}
    path: {{ .path | quote }}
    {{- end }}
  {{- end }}
{{- end }}
{{- end }}