{{- if .Values.bus }}
{{- if .Values.bus.enabled }}
apiVersion: enterprise.splunk.com/v4
kind: Bus
metadata:
  name: {{ .Values.bus.name }}
  namespace: {{ default .Release.Namespace .Values.bus.namespaceOverride }}
  {{- with .Values.bus.additionalLabels }}
  labels:
{{ toYaml . | nindent 4 }}
  {{- end }}
  {{- with .Values.bus.additionalAnnotations }}
  annotations:
{{ toYaml . | nindent 4 }}
  {{- end }}
spec:
  provider: {{ .Values.bus.provider | quote }}
  {{- with .Values.bus.sqs }}
  sqs:
    {{- if .endpoint }}
    endpoint: {{ .endpoint | quote }}
    {{- end }}
    {{- if .dlq }}
    dlq: {{ .dlq | quote }}
    {{- end }}
    {{- if .name }}
    name: {{ .name | quote }}
    {{- end }}
    {{- if .region }}
    region: {{ .region | quote }}
    {{- end }}
    {{- if .volumes }}
    volumes:
    {{ toYaml . | indent 4 }}
    {{- end }}
  {{- end }}
{{- end }}
{{- end }}