---
# assert for ingestor cluster custom resource to be ready
apiVersion: enterprise.splunk.com/v4
kind: IngestorCluster
metadata:
  name: ingestor
spec:
  replicas: 4
  queueRef:
    name: queue
  objectStorageRef:
    name: os
status:
  phase: Ready
  queue:
    provider: sqs
    sqs:
      name: index-ingest-separation-test-q
      authRegion: us-west-2
      endpoint: https://sqs.us-west-2.amazonaws.com
      dlq: index-ingest-separation-test-dlq
  objectStorage:
    provider: s3
    s3:
      endpoint: https://s3.us-west-2.amazonaws.com
      path: s3://index-ingest-separation-test-bucket/smartbus-test

---
# check for stateful sets and replicas updated
apiVersion: apps/v1
kind: StatefulSet
metadata:
  name: splunk-ingestor-ingestor
status:
  replicas: 4
